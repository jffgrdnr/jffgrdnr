<!DOCTYPE html>
<html class="r" lang="en-US">

<head>
    <meta charset="utf-8">
    <title>Modals | Ancestry.comÂ® Standards</title>
    <!-- Head content from header section -->
    <!--[if IE 7]><script>document.documentElement.className += " ie ie7";</script><![endif]-->
    <!--[if IE 8]><script>document.documentElement.className += " ie ie8";</script><![endif]-->
    <!--[if IE 9]><script>document.documentElement.className += " ie ie9";</script><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content=" " />
    <link rel="canonical" href="" />
    <script>
    var isTouchDevice = 'ontouchstart' in window || (window.DocumentTouch && document instanceof DocumentTouch);
    document.documentElement.className += (isTouchDevice ? ' touch' : ' noTouch');
    </script>
    <link href="http://canary.mfcreative.com/lib/tgn/combo.ashx?x/css/v1/main.css&x/css/v1/activity-indicator.css&x/css/v2/alert.css&x/css/v1/autocomplete.css&x/css/v1/button.css&x/css/v1/callout.css&x/css/v1/card.css&x/css/v2/carousel.css&x/css/v1/container.css&x/css/v1/form.css&x/css/v1/grid.css&x/css/v1/icon.css&x/css/v3/modal.css&x/css/v2/paging.css&x/css/v1/photo.css&x/css/v2/progress.css&x/css/v2/tab.css&x/css/v1/table.css&x/css/v1/template.css&x/css/v1/user-card.css&x/css/standards/standards.css&x/css/standards/prism.css" type="text/css" rel="stylesheet" />
    <!--[if lte IE 9]><script src="http://c.mfcreative.com/js/html5shiv.js"></script><![endif]-->
</head>
<body>
    <section class="con">
    	<a href="javascript:void(0);" class="ancBtn lrg" id="openModal">Open Modal</a>
    </section>
    <script src="http://canary.mfcreative.com/lib/tgn/combo.ashx?x/lib/jquery/jquery-1.11.1.min.js&x/js/v2/alert.js&x/js/v1/autocomplete.js&x/js/v1/callout.js&x/js/v2/carousel.js&x/js/v2/paging.js&x/js/v2/tab.js&x/js/standards/prism.js"></script>
    <section id="modal1" class="modal" data-title="Default Modal">
    	<header></header>
    	<form>
    		<fieldset>
    			<label>Hi, I'm a label</label>
    			<input type="text" />
				<a href="javascript:void(0);" class="ancBtn sml" id="resizeModal">Resize Modal</a>
    		</fieldset>
    	</form>
    </section>
    <section id="modal2" class="modal" data-title="Default Modal">
    	<header></header>
    	Another Modal
    </section>
    <script>
        (function ($) {
            "use strict";
            var Modal,
                version = 3,
                isIe8 = $('html').hasClass('ie8'), /* detect ie8 and earlier without $.browser for 1.11.0 */
                isIe9 = $('html').hasClass('ie9'); /* detect ie9 without $.browser for 1.11.0 */
            /* Use the newer version if the file is included twice and one version is newer than the other. */
            if ($.modal && version <= $.modal.version) {
                return false;
            }
            /* Setup modal object with defaults */
            Modal = {};
            Modal.defaults = {
                hideCloseBtn: false,
                closeOnBkgClick: true,
                closeOnEscape: true,
                fade: 200,
                isMarketing: false,
                showLoading: false,
                width: '',
                title: '',
                onOpen: function () { },
                onClose: function () { }
            };
            Modal.isOpen = false;
            Modal.isTouchDevice = 'ontouchstart' in window || (window.DocumentTouch && document instanceof DocumentTouch);
            Modal.paddingLeftRight = 40; /* Left and right padding on desktop view */
            Modal.widthTransition = 410; /* Animation width time */
            /* Add marker to allow for styles changes based on whether the device supports touch or not */
            Modal.addToPage = function () {
                $('<section id="modal"><div id="modalCenter"></div><div id="modalContents" role="dialog" aria-describedby="modalHeader" tabIndex="-1"><h4 id="modalHeader"></h4><button class="link icon iconClose" aria-label="Close Modal" id="modalClose" title="Close" type="button"></button></div></section>').appendTo('body');
                /* Add events */
                $('#modalClose').on('click.modal', function () {
                    $('body').trigger('closeModal.modal');
                });
                $('#modalContents').on('click.modal', function () {
                    Modal.stopClosing = true;
                });
            };
            Modal.setTitle = function (title) {
                if (title) {
                    $('#modalContents').addClass('modalHasTitle').find('#modalHeader').html(title);
                } else {
                    $('#modalContents').removeClass('modalHasTitle').find('#modalHeader').html('');
                }
            };
            Modal.centerModal = function () {
                var windowHeight = $('html').height(),
                    $modalContents = $('#modalContents'),
                    modalHeight = $modalContents.outerHeight();
                $('#modalCenter').css({ "margin-bottom": (-modalHeight / 2) + "px" });
                modalHeight += parseInt($modalContents.css('margin-top'), 10) + parseInt($modalContents.css('margin-bottom'), 10);
                if (Modal.isTouchDevice) {
                    if (modalHeight <= windowHeight) {
                        $('body, #modal').height(windowHeight);
                    } else {
                        $('body, #modal').height(modalHeight);
                    }
                }
            };
            Modal.resizeModal = function (width) {
                Modal.setWidth(width);
                if (isIe8) {
                    Modal.centerModal();
                } else {
                    setTimeout(Modal.centerModal, Modal.widthTransition);
                }
            };
            Modal.setWidth = function (width) {
                /* Add width if there is one, reset width from previous modal */
                var $modalContents = $('#modalContents');
                if (width && String(width).indexOf("%") !== -1) {
                    $modalContents.css('width', width);
                } else if (width) {
                    if ($(window).width() < 768 && !$modalContents.hasClass('modalMarketing')) {
                        Modal.paddingLeftRight = 24;
                    }
                    $modalContents.css('width', parseInt(width, 10) + Modal.paddingLeftRight);
                } else {
                    $modalContents.css('width', '');
                }
            };
            Modal.showLoading = function (loading) {
                if (loading) {
                    $('#modalContents').addClass('modalLoading');
                } else {
                    $('#modalContents').removeClass('modalLoading');
                }
            };
            $.fn.modal = function (options) {
                var addEvents,
                    closeModal,
                    openModal,
                    removeEvents,
                    $this = this,
                    settings = $.extend({}, Modal.defaults, options);
                settings.el = this; /* Need to save 'this' into settings to allow for modal after modal functionality */
                settings.windowPosition = [0, 0];
                Modal.stopClosing = false;
                /* Title should be passed in via the data-title attribute */
                /* These lines are temporary and are to fix past implementations. */
                if ($this.attr('title')) {
                    $this.attr('data-title', $this.attr('title'));
                    $this.removeAttr('title');
                }
                if (!settings.title && $this.attr('data-title')) {
                    settings.title = $this.attr('data-title');
                }
                addEvents = function () {
                    $('body').on('closeModal.modal', function () {
                        $('#modal').animate({
                            opacity: 0
                        }, (settings.fade / 2), 'linear', function () {
                            closeModal();
                        });
                    });
                    $(window).on('resize.modal orientationchange.modal', function () {
                        /* Without setTimeout here Android devices report the */
                        /* incorrect height when trying to center the modal */
                        setTimeout(Modal.centerModal, 300);
                    });
                    if (settings.closeOnBkgClick) {
                        $('#modal').on('click.modal', function () {
                            /* Allow for events attached via live or on to propogate without closing modal */
                            if (!Modal.stopClosing) {
                                $('body').trigger('closeModal.modal');
                            }
                            Modal.stopClosing = false;
                        });
                    }
                    if (settings.closeOnEscape) {
                        $('body').on('keydown.modal', function (event) {
                            if (!event.isDefaultPrevented() && event.keyCode && event.keyCode === 27) {
                                $('#modalContents').find(':focus').blur(); /* IE fix */
                                $('body').trigger('closeModal.modal');
                                event.preventDefault();
                                return false;
                            }
                        });
                    }
                };
                /* Remove specific modal events, title, and optional classes */
                closeModal = function (alreadyOpen) {
                    if (alreadyOpen !== true) {
                        Modal.isOpen = false;
                        $('html').removeClass('modalOpen');
                        $('body').css('padding-right', '').height('');
                        $('#modal').removeAttr('style');
                        $('#modalCenter').removeClass('modalCentered');
                        $('#modalContents').attr({
                            'style': '',
                             'role': ''
                        });
                        Modal.showLoading(false);
                        window.scrollTo(settings.windowPosition[0], settings.windowPosition[1]);
                    }
                    removeEvents();
                    if (Modal.previousSettings.el.data('dynamic')) {
                        Modal.previousSettings.el.remove();
                    } else {
                        Modal.previousSettings.el.hide();
                    }
                    Modal.previousSettings.onClose($this);
                    return Modal.previousSettings.windowPosition;
                };
                /* visible, focusable, and tabbable functions for accessibility when opening a modal */
                function visible(element) {
                    return $.expr.filters.visible(element) &&
                        !$(element).parents().andSelf().filter(function () {
                            return $.css(this, "visibility") === "hidden";
                        }).length;
                }
                function focusable(element, isTabIndexNotNaN) {
                    var map,
                        mapName,
                        img,
                        nodeName = element.nodeName.toLowerCase();
                    if ("area" === nodeName) {
                        map = element.parentNode;
                        mapName = map.name;
                        if (!element.href || !mapName || map.nodeName.toLowerCase() !== "map") {
                            return false;
                        }
                        img = $("img[usemap=#" + mapName + "]")[0];
                        return !!img && visible(img);
                    }
                    return (/input|select|textarea|button|object/.test(nodeName) ? !element.disabled : "a" === nodeName ? element.href || isTabIndexNotNaN : isTabIndexNotNaN) && visible(element);
                }
                function tabbable(element) {
                    var tabIndex = $.attr(element, "tabindex"),
                        isTabIndexNaN = isNaN(tabIndex);
                    return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);
                }
                openModal = function () {
                    var $modalContents,
                        $modalImages,
                        imageLength,
                        screenWidth = $(window).width(),
                        scrollbarWidth = 0,
                        imageCount = 0;
                    /* Add modal to page if not present */
                    if (!$('#modal').length) {
                        Modal.addToPage();
                    }
                    $modalContents = $('#modalContents')
                    /* If a previous modal is open, close it, then store the proper scroll location */
                    if (Modal.isOpen) {
                        settings.windowPosition = closeModal(true);
                    } else if ($(document).scrollTop() >= $('html').scrollTop()) {
                        settings.windowPosition = [$(document).scrollLeft(), $(document).scrollTop()];
                    } else {
                        settings.windowPosition = [$('html').scrollLeft(), $('html').scrollTop()];
                    }
                    /* Warn if they passed in an invalid selector */
                    if ($this === undefined || $this.length === 0) {
                        if (window.console) {
                            console.warn('Modal contents not found. Check your selector.');
                        }
                        return false;
                    }
                    /* Mark dynamic content to be able to remove it later */
                    if ($('body').find($this).length > 0) {
                        $this.data('dynamic', false);
                    } else {
                        $this.data('dynamic', true);
                    }
                    /* Move the element into the modal container */
                    if ($this.parent() !== $modalContents) {
                        $this.appendTo('#modalContents');
                    }
                    /* Show only these modal contents */
                    $this.show();
                    $('html').addClass('modalOpen');
                    /* Focus on modal contents and remove event on blur */
                    $("#modalContents")
                        .attr('role', 'alertdialog')
                        .focus()
                        .on("keydown.modal", function (e) {
                            /* Tab only within modal */
                            var tabbableElements = $(this).find("*").filter(function () {
                                    return tabbable(this);
                                }),
                                focusedElement = $(this).find(":focus");
                            if (e.keyCode === 9) {
                                if (e.shiftKey && focusedElement.get(0) === tabbableElements.first().get(0)) {
                                    e.preventDefault();
                                    tabbableElements.last().focus();
                                } else if (!e.shiftKey && focusedElement.get(0) === tabbableElements.last().get(0)) {
                                    e.preventDefault();
                                    tabbableElements.first().focus();
                                } else if ($("#modalContents:focus").length) {
                                    e.preventDefault();
                                    $("#modalClose").focus();
                                }
                            }
                        });
                    scrollbarWidth = $(window).width() - screenWidth;
                    $('body').css('padding-right', (parseInt($('body').css('padding-right'), 10) + scrollbarWidth) + 'px');
                    /* Scroll to top of page on touch devices */
                    if (Modal.isTouchDevice) {
                        window.scrollTo(0, 0);
                    } else {
                        window.scrollTo(settings.windowPosition[0], settings.windowPosition[1]);
                    }
                    /* Show title if there is one */
                    Modal.setTitle(settings.title);
                    /* Add loading icon if requested */
                    Modal.showLoading(settings.showLoading);
                    /* Handle marketing options */
                    if (settings.isMarketing) {
                        $modalContents.addClass('modalMarketing');
                        Modal.paddingLeftRight = 0;
                    } else {
                        $modalContents.removeClass('modalMarketing');
                        Modal.paddingLeftRight = 40;
                    }
                    /* Add width if passed in */
                    Modal.setWidth(settings.width);
                    /* Remove close button if necessary */
                    if (settings.hideCloseBtn) {
                        $modalContents.removeClass('modalShowClose');
                    } else {
                        $modalContents.addClass('modalShowClose');
                    }
                    /* Add Events that modal specific */
                    addEvents();
                    settings.onOpen($this);
                    /* We don't call centerModal if modal is already open so CSS transition can complete first */
                    /* But <= IE9 doesn't support transitions, so center immediately */
                    if (!Modal.isOpen || isIe8 || isIe9) {
                        $('#modal').show();
                        Modal.centerModal();
                    }
                    /* Catch-most for when .load fails. Also fixes Android */
                    setTimeout(Modal.centerModal, Modal.widthTransition);
                    $modalImages = $this.is('img') ? $this : $this.find('img');
                    imageLength = $modalImages.length;
                    /* Recenter the modal after images load (many browsers) */
                    if (imageLength > 0) {
                        $modalImages.load(function () {
                            imageCount += 1;
                            if (imageCount === imageLength) {
                                Modal.centerModal();
                            }
                        });
                    }
                    $('#modal').animate({
                        opacity: 1
                    }, settings.fade, 'linear', function () {
                        /* .modalCentered Exists to prevent transition until after first load */
                        $('#modalCenter').addClass('modalCentered');
                        $('#modalContents').animate({
                            opacity: 1
                        }, (settings.fade / 2), 'linear');
                    });
                    /*  For modal after modal functionality */
                    Modal.previousSettings = settings;
                    /* Set marker that modal is open */
                    Modal.isOpen = true;
                };
                removeEvents = function () {
                    $('body, #modal').off('.modal');
                    $(window).off('.modal');
                };
                /* Actually open the modal */
                openModal();
                return this;
            };
            $(function () {
                if (Modal.isTouchDevice) {
                    $('html').addClass('touch');
                } else {
                    $('html').addClass('noTouch');
                }
            });
            /* Publicly expose a few shorthand methods */
            $.modal = {};
            $.modal.center = function () { Modal.centerModal(); };
            $.modal.close = function () { $('body').trigger('closeModal.modal'); };
            $.modal.showLoading = function (loading) { Modal.showLoading(loading); };
            $.modal.resize = function (width) { Modal.resizeModal(width); };
            $.modal.title = function (title) { Modal.setTitle(title); };
            $.modal.preventClosing = function () { Modal.stopClosing = true; };
            $.modal.version = version;
        } (jQuery));
    </script>
        <script>
    	$("#openModal").click(function(e) {
    		$("#modal1").modal({
    			width: '500',
    			onOpen: function() {
    				$("#resizeModal").click(function(e) {
			    		$("<div><p>Here is the 2nd modal.</p><p>A whole bunch of stuff.</p><p>And some more stuff.</p></div>").modal({
				    			width: '200'
				    		});
			    	});
    			}
    		});
    	});
    	
    	$('#modalModal').click(function(e) {
			$('<div>Here is a dynamic example of a modal after a modal. <a class="btn" id="modal-embedded" href="javascript:void(0)">Click to see the next...</a></div>').modal({
				onOpen: function() {
					$('#modal-embedded').click(function(e) {
						$('<div><p>Here is the 2nd modal.</p><p>A whole bunch of stuff.</p><p>And some more stuff.</p></div>').modal({
							width: '200px',
							onClose: function() {
								console.log('2nd closed');
							}
						});
					});
				},
				onClose: function() {
					console.log('1st closed');
				}
			});
		});
    </script>
</body>
</html>
